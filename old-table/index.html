<!DOCTYPE html>
<html>
<head>

<!-- Tabletop -->
<script type="text/javascript" src="src/tabletop.js"></script>

<!-- jQuery -->
<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

<!-- DataTables CSS -->
<link rel="stylesheet" type="text/css" href="DataTables-1.10.3/media/css/jquery.dataTables.css">

  
<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="DataTables-1.10.3/media/js/jquery.dataTables.js"></script>


</head>

<body>
<div id="users">


</div>

  </body>

<script type="text/javascript">

var htmldiv = users;

var url = 'https://docs.google.com/spreadsheets/d/1dpGgq7nAqOHKd4lhUhIPbpm-3Gkz4szmpLrlNbxKxv8/pubhtml?gid=0&single=true';

$(document).ready( function(){
  Tabletop.init( {key: url, callback: showInfo, parseNumbers: true} )})


function showInfo(data, tabletop){
  console.log(data);


  $("#users").append('<h2>Table Working</h2><table id="mytable"><thead><tr><th>University</th><th>Billionaires</th><th>Billionaires Rank</th><th>U.S. News Rank</th></tr><thead><tbody></tbody></table>');


 $.each(tabletop.sheets("Sheet1").all(), function(i, cat){

    var htmltable = $('<tr><td class="university">' + cat.university + '</td>');
          htmltable.append('<td class="no">' + cat.numberofbillionaires + '</td>');
          htmltable.append('<td class="no2">' + cat.rankedbybillionaires + '</td>');
          htmltable.append('<td class="rank">' + cat.usnewsranking + '</td></tr>');
          htmltable.appendTo("tbody");
  })

}


$('#mytable').DataTable();


console.log("Is this running");

</script>

</html>